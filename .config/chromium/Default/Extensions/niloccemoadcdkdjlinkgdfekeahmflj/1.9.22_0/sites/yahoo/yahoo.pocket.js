!function(){function a(){"undefined"==typeof k&&(o(),k=setInterval(o,j.refreshInterval))}function b(){"undefined"!=typeof k&&(clearInterval(k),k=void 0)}function c(){d(),l=setTimeout(function(){a()},500)}function d(){"undefined"!=typeof l&&(clearTimeout(l),l=void 0)}function e(){f(),m=function(){b(),c()},$(window).on("scroll",m)}function f(){"undefined"!=typeof m&&$(window).off("scroll",m)}function g(){addHiddenEventListener(function(){isHidden()?b():a()})}function h(){a(),e(),g()}if(!isSafari()||window.top==window){var i={en:{success_saved_text:"saved to pocket"},de:{success_saved_text:"in pocket gespeichert"},es:{success_saved_text:"guardado en pocket"},es_419:{success_saved_text:"guardado en pocket"},fr:{success_saved_text:"sauvegardé dans Pocket"},it:{success_saved_text:"salvato in Pocket"},ja:{success_saved_text:"pocket に保存済み"},ru:{success_saved_text:"сохранены в pocket"},ko:{success_saved_text:"이(가) Pocket에 저장됨"},nl:{success_saved_text:"opgeslagen naar pocket"},pl:{success_saved_text:"zapisano w aplikacji pocket"},pt_BR:{success_saved_text:"Salvo no Pocket"},pt_PT:{success_saved_text:"guardado no Pocket"},zh_CN:{success_saved_text:"已保存到 Pocket"},zh_TW:{success_saved_text:"已儲存到 Pocket"}},j={};j.refreshInterval=1500,j.buttons=[{text:"pocket",successText:i[getCurrentLanguageCode()].success_saved_text,container:".content.cf",className:"side-button pocket-yahoo-button",selector:".pocket-yahoo-button",data:function(a){var b=$(a).attr("data-url").trim();b=unescape(b);var c=$(a).find("a")[0],d=$(c).text().trim();return{title:d,url:b}}}];var k,l,m,n=function(a){var b=document.createElement("a");return b.setAttribute("class",a.className),b.setAttribute("href","#"),b.style.cssText="top:31px;display:none;",b},o=function(){var a,b=j.buttons.length;for(a=0;b>a;a++){var c=j.buttons[a],d=$(c.container).not(".pocket-inserted"),e=d.length;0!==e&&$.each(d,function(a,b){if(-1!==b.className.indexOf("pocket-inserted"))return!1;var d=$(b);d.addClass("pocket-inserted");var e=n(c),f=$(e);$(d.find(".side-button")[1]).css("top","56px"),f.insertAfter(d.find(".side-button")[0]),d.hover(function(){f.show()},function(){f.hide()}),d.is(":hover")&&f.show();var g=c.data;f.on("click",function(a){var b=g(d),c={identifier:"yahoo",action:"addURL",url:b.url,title:b.title,actionInfo:{cxt_ui:"btn_yahoo",cxt_url:window.location.href}};return sendMessage(c,function(a){}),a.preventDefault(),!1})})}};addMessageListener(function(a,c,e){"settingChanged"===a.action&&"yahoo"===a.key&&("true"===a.value||a.value===!0?h():("false"===a.value||a.value===!1)&&(f(),d(),b()))}),sendMessage({action:"getSetting",key:"yahoo"},function(a){("true"===a.value||a.value===!0)&&h()})}}();